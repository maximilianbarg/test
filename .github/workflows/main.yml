on:
  push:
    branches:
    - main

jobs: 
  tag:
    runs-on: ubuntu-latest
    steps: 
    - name: Checkout  
      uses: actions/checkout@v2  
      with:  
          ref: ${{ github.ref_name }}   # aktueller Branchname
          fetch-depth: 0                # wichtig für vollständige Tags und History
          token: ${{ secrets.TOKEN }}  # Standard-Token reicht zum Pushen

    - name: Output
      run: |
        git config --global user.email "bargmaxi@gmail.com"
        git config --global user.name "Maximilian Barg"
          
    - name: Version  
      id: version  
      uses: maximilianbarg/tag-version@master  
      with:  
          production-branch: main
          test-branch: main  
          dev-branch: main 

    - name: Output
      run: |
        echo revision ${{steps.version.outputs.revision}}
